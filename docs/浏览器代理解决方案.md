# 浏览器代理解决方案

## 问题说明
浏览器环境由于安全限制，无法直接使用 Node.js 风格的代理配置。当前的修复确保应用不会崩溃，但代理功能在浏览器中不可用。

## 可用的解决方案

### 方案1: 使用浏览器扩展
安装代理扩展（如 SwitchyOmega）来处理浏览器级别的代理：
1. 在 Chrome/Firefox 中安装代理扩展
2. 配置代理服务器 `http://127.0.0.1:10808`
3. 为特定域名（如 `generativelanguage.googleapis.com`）启用代理

### 方案2: 系统级代理
在操作系统中配置全局代理：
- **Windows**: 设置 → 网络和Internet → 代理
- **macOS**: 系统偏好设置 → 网络 → 高级 → 代理
- **Linux**: 系统设置 → 网络 → 代理

### 方案3: 开发服务器代理
在 Vite 开发服务器中配置代理：

```javascript
// vite.config.ts
export default defineConfig({
  server: {
    proxy: {
      '/api': {
        target: 'https://generativelanguage.googleapis.com',
        changeOrigin: true,
        agent: new HttpsProxyAgent('http://127.0.0.1:10808')
      }
    }
  }
})
```

### 方案4: 后端代理服务
创建一个简单的后端服务来转发请求：

```javascript
// proxy-server.js
const express = require('express');
const { createProxyMiddleware } = require('http-proxy-middleware');
const { HttpsProxyAgent } = require('https-proxy-agent');

const app = express();

app.use('/api', createProxyMiddleware({
  target: 'https://generativelanguage.googleapis.com',
  changeOrigin: true,
  agent: new HttpsProxyAgent('http://127.0.0.1:10808')
}));

app.listen(3001);
```

## 推荐方案

对于开发环境，推荐使用**方案1（浏览器扩展）**或**方案2（系统级代理）**，因为：
- 配置简单
- 不需要修改代码
- 对所有应用生效

## 当前应用行为

- ✅ 应用不再崩溃
- ✅ 在浏览器中正常运行
- ⚠️ 代理功能仅在 Node.js 环境中可用
- ℹ️ 浏览器中会显示"不支持代理功能"的提示

这是最安全和稳定的状态。
