# V2版本提示词配置 - 优化版
# 章节总结提示词
chapterSummary:
  fiction: |
    请为以下章节内容生成一个详细总结：

    ## 要求
    - 重要：请保持原文的段落结构和换行，不要删除或合并段落。
    - 语言：请用自然流畅的语言总结本章内容
    - 核心要点：包括主要情节发展、重要人物表现、关键观点或转折，以及本章在整个故事中的作用和意义。
    - 精简：如果内容是致谢、目录、前言、序言等无实质故事内容的页面，请直接回复"无需总结"。

    ## 你需要处理的章节信息

    ### 章节标题：{{title}}

    ### 章节内容：
    {{content}}

  
  nonFiction: |
    # 角色
    你是一位顶尖的社科领域学者与书评家，具备卓越的文本解构、逻辑提炼和批判性思维能力。

    # 核心任务
    为输入的书籍章节生成一份兼具深度、结构与信息密度的专业级总结与分析。你的最终产出是一篇流畅、深刻、可直接发布的书评式文章。

    # 工作流程
    你将严格遵循以下四步流程：

    1.  **初步扫描**：
        *   检查输入内容是否为致谢、目录、版权、参考文献、注释等非实质性内容。
        *   如果是，则直接输出"无需总结"，并终止任务。

    2.  **深度解构**：
        *   通读章节，识别并划分出核心的“逻辑区块”。一个“逻辑区块”是指围绕一个核心论点、事件或主题的连续段落。
        *   在内心构思（不输出此部分）：本章的核心论点是什么？作者是如何组织论证的？本章在全书中的作用可能是什么？

    3.  **分块撰写：章节内容总结 (200-1000字)**
        *   **严格按照原文顺序**，为每一个“逻辑区块”撰写一段总结。
        *   **信息密度至上**：语言简练，精准捕捉关键论点、核心逻辑、情节转折、重要名词、核心案例。
        *   **格式化标记**：
            *   使用 `**加粗**` 标记每个区块最核心的主旨句。
            *   使用 `***加粗斜体***` 标记次级关键论点或金句。
            *   使用 `*斜体*` 补充说明案例或引用短语。
            *   使用 `> 引用` 呈现需要独立成行的原文内容引用。
            *   使用 `` `专有名词` `` 突出显示对全章内容有非同一般关键作用的：关键术语、人物、地点等（注意不要对一般性词汇滥用本格式）。

    4.  **整合升华：全章总结与反思 (200-500字)**
        *   **第一部分：全章脉络总结**。洞悉全文，以高度凝练的语言，系统性地梳理本章的逻辑脉络与核心贡献。
        *   **第二部分：评价与反思**。撰写一段连贯、有深度的评论，必须包含：
            *   **核心评价**：对章节内容的客观评价与你的核心感悟。
            *   **延伸思考**：结合你的知识储备，进行适度延伸，或指出观点在现实中的应用与局限。
            *   **启发性问题**：在文末提出 1-3 个深刻的、能激发读者进一步思考的问题（每个问题单独一行，以问号结尾）。

    # 绝对禁令
    *   **禁止任何形式的“模型人格”输出**：不得包含任何问候语、解释性文字（如“好的”、“这是对本章的总结”、“段落一”）、标题序号或谦词。
    *   **禁止使用 Markdown 标题（`#`）和分割线（`---`）**。直接输出正文。

    # 输入内容

    ### 章节标题：{{title}}

    ### 章节内容：
    {{content}}


# 思维导图提示词
mindmap:
  chapter: |
    ```ts
    export interface NodeObj {
      topic: string
      id: string
      tags?: string[]
      children?: NodeObj[]
    }
    // 总结父id的第start到end个节点的内容
    export interface Summary {
      id: string
      label: string
      parent: string
      start: number
      end: number
    }
    ```

    任务：分析以下章节内容，生成符合以下格式的JSON思维导图数据：
    {
      nodeData: NodeObj
      summaries?: Summary[]
    }

    严格规则：
    1. 节点ID使用递增数字
    2. 适当应用父子级别的分层，不要只使用兄弟节点关系
    3. 可选标签：核心、案例、实践、金句
    4. Summary用于总结同父节点的子节点，显示在侧边，禁止总结根节点
    5. 适当添加Summary，不要多余
    6. 最后添加一个金句节点记录本章金句
    7. 适当添加表达节点内涵的emoji
    8. 如果内容是致谢、目录、前言、序言、参考文献等页面，直接回复"{nodeData:null}"
    9. 只输出JSON格式，不要输出任何解释性文字、问候语或无关内容

    输出格式：纯JSON，无任何前缀或后缀文字

  arrow: |
    ```ts
    export interface NodeObj {
      topic: string
      id: string
      tags?: string[]
      children?: NodeObj[]
    }

    export interface Arrow {
      id: string
      label: string
      from: string
      to: string
      delta1: { x: number; y: number }
      delta2: { x: number; y: number }
      bidirectional?: boolean
    }
    ```

    任务：为已有思维导图添加箭头连接，输出符合以下格式的JSON：
    {
      arrows?: Arrow[]
    }

    严格规则：
    1. Arrow连接任意节点，label说明节点联系，delta默认值50,50
    2. 直接的父子关系不需要使用Arrow
    3. 最多添加6条Arrow，只连接最关键的节点关系
    4. 只输出JSON格式，不要输出任何解释性文字、问候语或无关内容

    输出格式：纯JSON，无任何前缀或后缀文字

  combined: |
    ```ts
    export interface NodeObj {
      topic: string
      id: string
      tags?: string[]
      children?: NodeObj[]
    }
    // 总结父id的第start到end个节点的内容
    export interface Summary {
      id: string
      label: string
      parent: string
      start: number
      end: number
    }
    ```

    任务：分析整书章节结构，生成符合以下格式的JSON思维导图数据：
    {
      nodeData: NodeObj
      summaries?: Summary[]
    }

    严格规则：
    1. 节点ID使用递增数字
    2. 体现整书的逻辑结构和层次关系
    3. 可选标签：核心、案例、实践、金句
    4. Summary用于总结同父节点的子节点，显示在侧边
    5. 适当添加Summary，不要多余
    6. 最后添加一个金句节点记录全书金句
    7. 适当添加表达节点内涵的emoji
    8. 只输出JSON格式，不要输出任何解释性文字、问候语或无关内容

    输出格式：纯JSON，无任何前缀或后缀文字

# 章节关联分析提示词
connectionAnalysis: |
  任务：分析以下各章节之间的关系，并总结全书的核心内容。

  章节总结内容：
  {{chapterSummaries}}

  分析要求：
  1. 章节之间的联系
     - 各章节是如何一步步展开论述的？
     - 哪些重要观点在不同章节中反复出现？
     - 前面的章节为后面的内容做了哪些铺垫？

  2. 全书的核心主题
     - 这本书最想告诉读者什么？
     - 作者的主要观点是什么？
     - 有哪些值得特别关注的重要概念？

  3. 实用价值
     - 这本书对现实生活有什么指导意义？
     - 读者可以从中学到什么实用的知识或方法？
     - 哪些观点可能会改变我们的思考方式？

  4. 简明总结
     - 用几句话概括这本书的精华
     - 推荐给什么样的人阅读
     - 阅读这本书的最大收获是什么

  输出要求：
  - 用通俗易懂的语言分析，让普通读者轻松理解
  - 结构清晰，层次分明
  - 不要输出任何问候语、解释性文字或无关内容
  - 直接输出分析内容，无任何前缀或后缀文字

# 全书总结提示词
overallSummary: |
  任务：基于以下信息生成《{{bookTitle}}》的全面总结报告。

  书籍章节结构：
  {{chapterInfo}}

  章节关联分析：
  {{connections}}

  总结要求：
  1. 生成一个全面的总结报告，帮助读者快速掌握全书精髓
  2. 内容应包括：
     - 书籍核心观点和主要论述
     - 重要的概念和理论框架
     - 实际应用价值和指导意义
     - 适合的读者群体
     - 阅读本书的主要收获

  输出要求：
  - 语言简洁明了，重点突出
  - 结构清晰，便于阅读
  - 不要输出任何问候语、解释性文字或无关内容
  - 直接输出总结内容，无任何前缀或后缀文字

# 其他系统提示词
system:
  testConnection: "这是一个连接测试。请简单回复\"OK\"，不要添加任何其他文字、标点符号或格式。"
