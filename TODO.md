# 新feature TODO模板 - Markdown内容预览功能增强

## 需求目标

- 解释、定义清楚当前新feature的主要实现功能、用法、效果，以及效果边界。

### 主要功能
1. **修复链接配色问题**：解决当前预览区域中链接在深色模式下显示不正常的问题，确保链接在浅色和深色模式下都有良好的可读性和交互体验。

2. **上线完整的Markdown内容预览功能**：在当前处理结果预览区域实现一个功能完善的Markdown预览器，支持：
   - 完整的Markdown语法渲染
   - 响应式字体大小调节（全局倍数调节）
   - 深色/浅色模式配色适配
   - 所有HTML标签的正确显示（包括<u>、<mark>等）

### 用法
- 用户在处理结果预览区域可以看到格式正确、配色友好的Markdown内容
- 可以通过全局字体大小控制调节预览内容的字体大小
- 链接在深色和浅色模式下都清晰可见且交互状态明确

### 效果边界
- 仅影响UI预览区域的显示效果
- 不改变原始数据处理逻辑
- 保持向后兼容性

## 可选实现方案

### 方案1：增强现有Tailwind CSS配置（简单）
- **原理**：通过修改现有的Tailwind CSS类和全局样式，修复链接配色问题，增强MarkdownCard组件的样式支持
- **成本**：
  - 需要修改：`src/index.css`、`src/components/MarkdownCard.tsx`
  - 无需引入新依赖
  - 与现有代码无冲突
- **方法优缺点**：
  - 优点：改动最小，风险低，易于维护
  - 缺点：功能相对基础，扩展性有限
- **参考来源**：Tailwind CSS官方文档、@tailwindcss/typography插件文档

### 方案2：创建专用Markdown预览组件（中等复杂度）
- **原理**：创建一个专用的Markdown预览组件，集成react-markdown、remark-gfm等插件，并提供完整的主题支持和字体大小控制
- **成本**：
  - 需要创建：`src/components/MarkdownPreview.tsx`
  - 需要修改：现有使用MarkdownCard的地方
  - 可能需要引入：额外的react-markdown插件
- **方法优缺点**：
  - 优点：功能完整，可扩展性强，组件化程度高
  - 缺点：需要重构现有代码，工作量中等
- **参考来源**：react-markdown官方文档、remark插件生态

### 方案3：集成专业Markdown编辑器（复杂）
- **原理**：集成如@uiw/react-md-editor、MDEditor等专业Markdown编辑器组件，提供完整的预览和编辑功能
- **成本**：
  - 需要引入：较大的第三方依赖包
  - 需要重构：现有预览逻辑
  - 需要配置：编辑器主题和样式
- **方法优缺点**：
  - 优点：功能最强大，用户体验最佳
  - 缺点：包体积大，配置复杂，可能存在样式冲突
- **参考来源**：@uiw/react-md-editor GitHub、MDEditor文档

## 执行前准备

- 确保执行前项目已经git commit，方便后期revert回滚操作
- 确保存在test目录，在test目录下隔离地试验新feature的实现方案

## 执行阶段

- 按照从**简单到复杂**的顺序，依次选择每个**完整方案**，进行以下新feature的测试操作：
  - 再次详细分析本方案的实现思路和具体步骤、技术细节
  - 列出TODO列表，便于后期依次执行
  - TODO列表后附需要注意的细节
  - 按照TODO列表，依次执行
  - 遵循**简单至上**原则

## 补充原则

- **隔离测试**：新feature的测试过程中，尽可能在test文件夹中进行
- **原子化测试**：每次只测试一个功能
- **简单至上**：先彻底尝试简单方案
- **立项审批**：当可选实现方案定型后，请完成"在根目录下生成一个TODO.md文件"操作后，暂停一下，询问是否赞同
- **保护敏感信息**：避免敏感信息泄露到原代码中

## 当前TODO列表

基于方案1（增强现有Tailwind CSS配置）：

- [] 修复链接在深色模式下的配色问题
- [] 增强全局CSS中的链接样式定义
- [] 优化MarkdownCard组件的prose样式配置
- [] 添加全局字体大小控制功能
- [] 测试深色/浅色模式下的显示效果
- [] 测试字体大小调节功能
- [] 验证所有HTML标签的正确显示
- [] 撰写功能说明文档
- [] 清理冗余代码和依赖
- [] 进行最终测试和git commit
